# 流年的小手机

一个基于Web的移动端风格聊天应用，支持多角色对话和AI聊天功能。

## 版本历史

### v2.2.4
- 修复API响应仅显示第一个内容的问题
- 优化多消息处理逻辑，确保所有分割内容都能正确显示
- 添加多消息分隔符样式，提升视觉体验
- 改进消息渲染机制，避免重复分割导致内容丢失

### v2.2.3
- 修复图片上传时content请求体中内容为固定文本的问题
- 优化图片上传功能，现在会使用用户输入的消息文本而非固定提示
- 改进图片消息处理逻辑，确保API请求中的文本内容正确

### v2.2.2
- 修复多选模式下点击消息气泡时复选框和高亮不同步的问题
- 修复全选消息时无法同步蓝色高亮的问题
- 优化多选模式的交互体验

### v2.2.1
- 优化消息交互方式，将长按消息气泡改为双击操作
- 提升用户体验，使消息编辑和删除功能更容易操作

### v2.2.0
- 实现消息编辑功能，支持长按消息气泡进行编辑
- 添加消息删除功能，支持单条消息删除
- 实现多选功能，支持批量选择和删除多条消息
- 优化消息交互体验，添加长按菜单和编辑对话框
- 增强消息气泡的交互性和用户体验

### v2.1.9
- 优化图片上传功能，添加等待默认等待时长的支持
- 确认使用SiliconFlow API作为默认配置

### v2.1.8
- 将图片上传大小限制从5MB增加到20MB，支持更大的图片文件

### v2.1.7
- 实现图片消息嵌入上下文功能，支持AI分析图片内容
- 修改sendImage函数，将图片发送给AI而不是显示固定回复
- 优化callAIAPI函数，支持图片消息的base64编码发送

### v2.1.6
- 修复图片上传后出现的"Cannot access 'error' before initialization"错误
- 解决了callAIAPI函数中的变量命名冲突问题

### v2.1.5
- 修复图片消息无法以气泡形式展现的问题
- 修复图片和文件消息未正确载入上下文的问题
- 优化文件消息的交互体验

### v2.1.4
- 在聊天界面发送按钮右侧添加了加号按钮
- 点击加号按钮可弹出菜单栏，包含发送图片、发送文件、语音输入和清空对话四个功能
- 实现了图片和文件消息的渲染与显示
- 添加了文件大小格式化功能
- 优化了菜单栏的交互体验和视觉效果

### v2.1.3
- 修改了许可证详情按钮功能，点击后跳转到项目主页
- 更新了按钮文本为"访问项目主页"，更符合功能描述
- 修复了清空聊天记录功能的bug

### v2.1.2
- 强制启用角色扮演模式，不再允许用户关闭此功能
- 移除了多消息输出的额外提示词约束，简化了系统提示词结构
- 优化了角色扮演体验，提供更加自然的对话交互

### v2.1.1
- 修复了编辑角色时保存按钮报错的问题
- 添加了updateChatHeader函数来更新聊天头部的角色名称
- 优化了Service Worker注册逻辑，避免在本地文件系统上注册失败

### v2.1.0
- 添加了编辑角色功能，支持修改角色名称、人设和头像
- 实现了清空当前角色聊天记录功能
- 优化了界面交互和响应式设计

### v2.0.0
- 重构了应用架构，提升了性能和用户体验
- 添加了多角色支持
- 实现了本地存储功能

## 功能特点

- 多角色聊天：支持创建和管理多个AI角色
- 角色编辑：可以编辑角色的名称、人设和头像
- 聊天记录：自动保存每个角色的聊天记录
- 消息编辑：支持长按消息气泡进行编辑和修改
- 消息删除：支持单条消息删除和批量删除功能
- 多选功能：支持批量选择多条消息进行操作
- 响应式设计：适配不同屏幕尺寸的设备
- 本地存储：所有数据都保存在浏览器本地存储中

## 使用说明

1. 点击主屏幕的"聊天"图标进入角色列表
2. 点击右上角的"+"按钮添加新角色
3. 在聊天界面，点击右上角的"编辑"按钮编辑当前角色
4. 在编辑角色界面，可以修改角色名称、人设和头像，也可以清空当前角色的聊天记录
5. 双击消息气泡可以编辑或删除该条消息
6. 通过双击菜单中的"多选"选项可以进入多选模式，批量选择和删除消息

## 技术栈

- HTML5
- CSS3
- JavaScript
- 响应式设计
- 本地存储API

## 许可证

本软件采用自定义许可证，具体条款如下：

### 允许的行为
- **二次传播**：允许自由传播本软件的原始版本
- **非盈利性二次修改**：允许以非盈利性目的对本软件进行修改，但需满足以下条件：
  - 获得原作者（流年）的授权
  - 在新项目中明确添加原作者的署名

### 限制的行为
- **盈利性二次修改与分发**：完全以盈利为目的的二次修改与二次分发，必须获得原作者（流年）的明确授权

### 联系方式
如需授权，请联系原作者流年。

## 开发者

流年